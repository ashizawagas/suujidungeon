/* レスポンシブ対応 */
@media (max-width: 1400px) {
  .game-layout {
    flex-direction: column;
  }
  
  .mapping-area {
    flex: none;
    align-self: center;
  }
  
  #startScreen {
    margin: 5px;
    padding: 20px;
  }
  
  #startScreen h1 {
    font-size: 32px;
  }
  
  .level-buttons {
    gap: 10px;
  }
  
  .level-button {
    font-size: 14px;
    padding: 10px 16px;
  }
  
  .matching-number-grid {
    gap: 12px;
  }
  
  .matching-number-card {
    padding: 12px;
    font-size: 1.8em;
  }
}

@media (max-width: 800px) {
  .matching-number-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 10px;
  }
  
  .matching-score-info {
    flex-direction: column;
    text-align: center;
  }
  
  .mapping-area {
    width: 100%;
  }
  
  #mappingDisplay canvas {
    width: 100%;
    height: auto;
  }
  
  .control-buttons {
    justify-content: center;
  }
}
</style>
</head>
<body>
<!-- スタート画面 -->
<div id="startScreen">
  <h1>🏰 すうじダンジョン 🏰</h1>
  <p>
    めいろのなかにかくされたたからばこをすべてみつけよう！<br>
    いきどまりにたからばこがかくされているよ。<br>
    たからばこをみつけると、すうじマッチングゲームがはじまるよ！<br><br>
    <strong>そうさほうほう:</strong><br>
    ↑キー：ぜんしん | ⇒キー：みぎをむく | ⇦キー：ひだりをむく<br>
    Hキー：2D/3Dひょうじきりかえ | Mキー：マップひょうじきりかえ
  </p>
  
  <div class="level-selection">
    <h2>🎯 レベルをえらんでね 🎯</h2>
    <div class="level-buttons">
      <button id="しょきゅうButton" class="level-button">しょきゅう</button>
      <button id="ちゅうきゅうButton" class="level-button selected">ちゅうきゅう</button>
      <button id="じょうきゅうButton" class="level-button">じょうきゅう</button>
    </div>
    <div class="level-info">
      しょきゅう: 11×11マス | ちゅうきゅう: 13×13マス | じょうきゅう: 19×19マス
    </div>
    <div class="selected-level">
      えらばれたレベル: <span id="selectedLevel">ちゅうきゅう</span>
    </div>
  </div>
  
  <button id="startButton">🎮 ゲームスタート 🎮</button>
</div>

<!-- ゲーム画面 -->
<div id="gameScreen">
  <h1>🏰 すうじダンジョン 🏰</h1>
  <div id="gameInfo">
    <div class="treasure-info">
      💰 みつけたたからばこ: <span id="found">0</span> / <span id="total">0</span>
    </div>
    <div class="treasure-info">
      📊 レベル: <span id="currentLevel">ちゅうきゅう</span>
    </div>
    <div id="status">たからばこをさがしてください！</div>
  </div>
  <div class="controls">
    <strong>そうさほうほう:</strong> ↑キー：ぜんしん | ⇒キー：みぎをむく | ⇦キー：ひだりをむく | Hキー：2D/3Dひょうじきりかえ | Mキー：マップひょうじきりかえ
  </div>
  
  <div class="control-buttons">
    <button id="viewMode" class="control-button" onclick="toggle2D()">2Dひょうじにきりかえ (H)</button>
    <button id="mappingMode" class="control-button mapping" onclick="toggleMapping()">マップをひょうじ (M)</button>
  </div>
  
  <div class="game-layout">
    <div class="main-game-area">
      <div id="render3D"></div>
      <div id="render2D"></div>
    </div>
    
    <div class="mapping-area">
      <div class="mapping-title">🗺️ たんけんマップ</div>
      <div id="mappingDisplay"></div>
      <div class="mapping-legend">
        <div class="legend-item">
          <div class="legend-color legend-path"></div>
          <span>とおったみち</span>
        </div>
        <div class="legend-item">
          <div class="legend-color legend-player"></div>
          <span>げんざいのいち</span>
        </div>
        <div class="legend-item">
          <div class="legend-color legend-treasure-found"></div>
          <span>みつけたたからばこ</span>
        </div>
        <div class="legend-item">
          <div class="legend-color legend-treasure-unfound"></div>
          <span>みはっけんのたからばこ</span>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- 数字マッチングゲーム画面 -->
<div id="matchingGameScreen">
  <div class="matching-game-container">
    <h1>🌈 すうじマッチングゲーム 🌈</h1>
    
    <div class="matching-instructions">
      <span class="matching-cute-decoration">🎀</span>
      <strong>たからばこをあけるために、すうじをマッチングしよう！</strong>
      <span class="matching-cute-decoration">🎀</span>
      <br><br>
      たして もくひょうのかずになる ペアをみつけて つなげよう！
      <br>
      <span class="matching-emoji">✨</span>がんばって<span class="matching-emoji">✨</span>
    </div>
    
    <div class="matching-score-info">
      <div>🎯 つくるかず: <span class="matching-target-number" id="matchingTargetNumber"></span></div>
      <div>💖 のこり: <span id="matchingRemainingPairs">5</span> ペア</div>
    </div>
    
    <div class="matching-number-grid" id="matchingNumberGrid"></div>
    
    <div class="matching-clear-message" id="matchingClearMessage">
      🎉✨ おめでとう！ ✨🎉
      <br>
      すべてのペアを みつけました！
      <br>
      🌟 たからばこがひらきます 🌟
    </div>
  </div>
</div>
</body>
</html>
